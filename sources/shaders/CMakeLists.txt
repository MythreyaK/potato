# Compile shaders

cmake_minimum_required (VERSION 3.20)

file(GLOB_RECURSE VERT_SHADERS RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} CONFIGURE_DEPENDS *.vert)
file(GLOB_RECURSE FRAG_SHADERS RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} CONFIGURE_DEPENDS *.frag)

foreach(FRAG_SHADER ${FRAG_SHADERS})
    execute_process(COMMAND ${Vulkan_GLSLC_EXECUTABLE} ${FRAG_SHADER} -o "${CMAKE_CURRENT_BINARY_DIR}/../testapp/${FRAG_SHADER}.spv"
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
    )
endforeach()

foreach(VERT_SHADER ${VERT_SHADERS})
    execute_process(COMMAND ${Vulkan_GLSLC_EXECUTABLE} ${VERT_SHADER} -o "${CMAKE_CURRENT_BINARY_DIR}/../testapp/${VERT_SHADER}.spv"
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
    )
endforeach()
